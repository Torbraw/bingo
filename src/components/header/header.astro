---
import ThemeToggle from './theme-toggle.astro';
import type { LangKeys } from '@/lib/config';
import { Button } from '../ui/button';
import HeaderNav from './header-nav.astro';
import { MenuIcon } from '@/components/common/icons';

interface Props {
  lang: LangKeys;
}

const { lang } = Astro.props;
---

<header class="mb-4 flex h-12 items-center border-b border-border px-8">
  <div class="flex flex-1">
    <div class="flex w-full gap-6 font-medium">
      <HeaderNav type="desktop" lang={lang} />
      <div
        class="fixed bottom-0 left-0 right-0 top-[56px] z-50 hidden w-full overflow-y-auto bg-background px-4 lg:hidden"
        id="mobile-menu"
      >
        <HeaderNav lang={lang} type="mobile" />
      </div>
    </div>
  </div>
  <div class="flex justify-end gap-4">
    <ThemeToggle />
    <Button name="mobile-menu" variant="ghost" size="icon" class="lg:hidden" id="mobile-menu-btn">
      <MenuIcon class="h-6 w-6 text-foreground" />
    </Button>
  </div>
</header>

<script is:inline>
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const body = document.body;

  mobileMenuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    body.classList.toggle('overflow-hidden');
  });
</script>
